# 部署配置文档
**项目名称：** 海外自动化营销系统  
**版本号：** V1.0  
**发布日期：** 2025-08-08  
**撰写人：** 运维组  

---

## 1. 环境要求

### 1.1 服务器配置
| 项目 | 最低配置         | 推荐配置         |
| ---- | ---------------- | ---------------- |
| CPU  | 4核              | 8核以上          |
| 内存 | 8GB              | 16GB 以上        |
| 磁盘 | 100GB SSD        | 200GB SSD        |
| 系统 | Ubuntu 22.04 LTS | Ubuntu 22.04 LTS |

### 1.2 软件依赖
- Node.js LTS (>=18.x)
- MySQL 8.x
- Redis 7.x
- Docker 24+
- Kubernetes 1.29+
- Nginx 最新稳定版

---

## 2. 部署流程

### 2.1 前端部署
```bash
cd frontend
pnpm install
pnpm build
# 产物在 dist/，拷贝到 Nginx 静态目录
```

### 2.2 后端部署
```bash
cd backend
pnpm install
pnpm build
pm2 start dist/main.js --name om-backend
```

### 2.3 数据库初始化
```bash
mysql -u root -p < docs/03-数据库与模型文档/数据迁移脚本.sql
```

---

## 3. Kubernetes 部署
- `deployments/k8s/frontend-deployment.yaml`
- `deployments/k8s/backend-deployment.yaml`
- `deployments/k8s/mysql-statefulset.yaml`
- `deployments/k8s/redis-deployment.yaml`
- `deployments/k8s/ingress.yaml`

执行：
```bash
kubectl apply -f deployments/k8s/
```

---

## 4. 反向代理配置（Nginx）
```nginx
server {
    listen 80;
    server_name marketing.example.com;

    location / {
        root /var/www/om-frontend;
        index index.html;
        try_files $uri /index.html;
    }

    location /api/ {
        proxy_pass http://om-backend:3000/;
    }
}
```

---

## 5. 版本记录
- **V1.0**：初版部署与配置流程

---